---
title: Surveillance Accès Site Web
sidebar_label: "19.1 Surveillance Web"
sidebar_position: 1
---

# 19.1 Surveillance des Accès Site Web

## Logs Apache en temps réel

**Visualisation en direct :**

```bash
sudo tail -f /var/log/apache2/atlastech_access.log
```

**Analyse des codes HTTP :**

```bash
awk '{print $9}' /var/log/apache2/atlastech_access.log | sort | uniq -c | sort -rn
```

**Résultat exemple :**
```
    450 200
     23 404
     12 403
      5 500
```

**Top 10 IPs :**

```bash
awk '{print $1}' /var/log/apache2/atlastech_access.log | sort | uniq -c | sort -rn | head -10
```

## Script de monitoring automatisé

```bash
sudo nano /usr/local/bin/monitor_web.sh
```

**Contenu :**

```bash
#!/bin/bash
LOG="/var/log/apache2/atlastech_access.log"
ALERT_LOG="/var/log/atlastech/web_alerts.log"

# Détecter plus de 100 requêtes depuis une IP en 1 minute
awk -v date="$(date -d '1 minute ago' '+%d/%b/%Y:%H:%M')" \
'$4 > "["date {print $1}' $LOG | \
sort | uniq -c | awk '$1 > 100 {print "[ALERT] "$2" - "$1" requêtes"}' >> $ALERT_LOG

# Détecter scans (trop de 404)
awk '{if($9==404) print $1}' $LOG | sort | uniq -c | \
awk '$1 > 50 {print "[SCAN DETECTED] "$2}' >> $ALERT_LOG
```

**Planification cron :**

```bash
(crontab -l; echo "*/5 * * * * /usr/local/bin/monitor_web.sh") | crontab -
```